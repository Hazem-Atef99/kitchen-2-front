<c-card class="mb-4">
    <c-card-header class="d-flex justify-content-between align-items-center py-4">
        <strong> اضافة عروض الأسعار</strong>
        <button class="btn btn-success" (click)="AddClientFile()">
            اضافة
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg"
                viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z" />
            </svg>
        </button>
    </c-card-header>
</c-card>
<c-card class="mb-4 py-4">
    <form [formGroup]="AddClientFileForm">
        <c-row class="p-2">
            <c-col>
                <c-form-check>
                    <input cFormCheckInput formControlName="fileTypeId" type="radio" name="fileTypeId" value="1" />
                    <label cFormCheckLabel>المطابخ</label>
                </c-form-check>
            </c-col>
            <c-col>
                <c-form-check>
                    <input cFormCheckInput formControlName="fileTypeId" type="radio" name="fileTypeId" value="2" />
                    <label cFormCheckLabel>الابواب</label>
                </c-form-check>
            </c-col>
            <c-col>
                <c-form-check>
                    <input cFormCheckInput formControlName="fileTypeId" type="radio" name="fileTypeId" value="4" />
                    <label cFormCheckLabel>خزائن الحائط</label>
                </c-form-check>
            </c-col>
            <c-col>
                <c-form-check>
                    <input cFormCheckInput formControlName="fileTypeId" type="radio" name="fileTypeId" value="6" />
                    <label cFormCheckLabel>الاعمال الخشبية</label>
                </c-form-check>
            </c-col>
        </c-row>
        <c-col class="mx-2 my-4" *ngIf="loadPriceOffer">
            <div class="card">
                <div class="card-header m-0">
                    <h5>الزبون</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-4">
                            <label>الزبون</label>
                            <select aria-label="Default select example" formControlName="clientId"
                            cSelect>
                            <option selected value="">اختر الزبون</option>
                            <option
                                *ngFor="let Client of allClients"
                                [value]="Client.clientId">{{Client.clientName}}</option>
                        </select>
                        </div>
                    </div>
                </div>
            </div>
        </c-col>
        <c-col class="mx-2 my-4" *ngIf="loadPriceOffer">
            <div class="card">
                <div class="card-header m-0">
                    <h5>المجاميع</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-4">
                            <label>الخصم الاضافى</label>
                            <input aria-label="default input example" cFormControl formControlName="additionaldiscount"
                                type="number" />
                        </div>
                      <div class="col-4">
                        <label>خصم الوحدات</label>
                        <input aria-label="default input example" cFormControl formControlName="discount"
                               type="number" />
                      </div>
                      <div class="col-4">
                        <label>خصم الاكسسوارات</label>
                        <input aria-label="default input example" cFormControl formControlName="accessoryDiscount"
                               type="number" />
                      </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="row">
                      <div class="col-4">
                        مجموع التوب: {{TopCount}}
                      </div>
                      <div class="col-4">
                        مجموع الوحدات: {{unitsCounts}}
                      </div>
                      <div class="col-4">
                        مجموع الاكسسوارات: {{accessoriesCount}}
                      </div>
                    </div>
                </div>
            </div>
        </c-col>
        <c-col class="mx-2 my-4" *ngIf="loadPriceOffer">
            <div class="card">
                <div class="card-header m-0">
                    <h5>المطبخ</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <ng-container formArrayName="items">
                            <ng-container *ngFor="let item of itemsFormArray.controls;let i = index">
                                <ng-container *ngIf="ListOfItems[i]?.x">
                                    <ng-container [formGroupName]="i">
                                        <div class="col-md-6 mb-3">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label>{{ListOfItems[i].name}}</label>
                                                    <select aria-label="Default select example"
                                                            formControlName="itemId" (change)="setPrice($event, i); getPrice(i)"
                                                        cSelect>
<!--                                                        <option selected disabled>اختر {{ListOfItems[i].name}}</option>-->
                                                        <option
                                                            *ngFor="let load of loadPriceOffer[ListOfItems[i].value]?.statuses"
                                                            [value]="load.statusId">{{load.description}}</option>
                                                    </select>
                                                </div>
                                                <div class="col-3" *ngIf="ListOfItems[i].isCount">
                                                    <label>العدد</label>
                                                    <input  aria-label="default input example" cFormControl
                                                        formControlName="itemCount" type="number" (keyup)="getPrice(i)"
                                                    />
                                                </div>
                                                <div class="col-3">
                                                    <label>السعر</label>
                                                    <input style="{{item.get('eachItemPrice')?.value > 0? 'opacity: 50%; pointer-events: none' : ''}}"
                                                       aria-label="default input example" cFormControl
                                                        formControlName="itemPrice" type="number"
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </ng-container>
                            </ng-container>
                        </ng-container>
                        <div class="col-md-6 mb-3">
                            <div class="row">
                                <div class="col-12">
                                    <label>متطلبات العميل</label>
                                    <textarea cFormControl formControlName="deviceNotes" cols="30" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </c-col>
        <c-row class="px-2">
            <ng-container formGroupName="items1" *ngIf="loadPriceOffer">
                <ng-container>
                    <ng-container>
                        <ng-container>
                            <div class="col-md-6 mb-3">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between">
                                        <h5>الوحدات</h5>
                                        <button [disabled]="myViewArray1.length == 0" class="btn btn-success" (click)="addUnitItem()">
                                          اضافة
                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg"
                                               viewBox="0 0 16 16">
                                            <path fill-rule="evenodd"
                                                  d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z" />
                                          </svg>
                                        </button>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-4">
                                                <label style="visibility: hidden;">.</label>
                                                <select aria-label="Default select example" formControlName="itemId" cSelect>
<!--                                                    <option selected value="">اختر الوحدات</option>-->
                                                    <option (change)="setPrice1($event); getPrice1()"
                                                        *ngFor="let load of loadPriceOffer['unites']?.statuses"
                                                        [value]="load.statusId">{{load.description}}
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="col-4">
                                                <label>الوحدة</label>
                                                <select aria-label="Default select example" formControlName="categoryId"
                                                    cSelect>
                                                    <option selected value="">اختر الوحدة</option>
                                                    <option *ngFor="let Unit of UnitsItemsbyCategory?.statuses"
                                                        [value]="Unit.statusId">{{Unit.description}}</option>
                                                </select>
                                            </div>

                                            <div class="col-2">
                                                <label>العدد</label>
                                                <input aria-label="default input example" cFormControl
                                                    formControlName="itemCount" type="number" (keyup)="getPrice1()"/>
                                            </div>
                                            <div class="col-2">
                                                <label>السعر</label>
                                                <input style="{{items1Form.get('eachItemPrice')?.value > 0? 'opacity: 50%; pointer-events: none' : ''}}"
                                                  aria-label="default input example" cFormControl
                                                    formControlName="itemPrice" type="number" />
                                            </div>
                                            <div class="col-md-12 mb-3">
                                                <div class="row">
                                                    <div class="col-12">
                                                        <label>الملاحظة</label>
                                                        <textarea formControlName="notes" class="form-control" rows="3">
                                                        </textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <table class="w-100">
                                                  <table [striped]="true" cTable>
                                                    <thead>
                                                    <tr>
                                                      <th scope="col">التصنيف</th>
                                                      <th scope="col">الوحدة</th>
                                                      <th scope="col">العدد</th>
                                                      <th scope="col">الملاحظات</th>
                                                      <th scope="col">السعر</th>
                                                      <th scope="col">حذف</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr *ngFor="let units of myViewArray1; index as i">
                                                      <td>{{units.unit}}</td>
                                                      <td>{{units.unit2}}</td>
                                                      <td>{{units.count}}</td>
                                                      <td>{{units.note}}</td>
                                                      <td>{{units.price}}</td>
                                                      <td>
                                                        <button (click)="deleteUnits(i)" cButton class="btn btn-danger m-0 p-2">
                                                          <svg cIcon name="cil-trash"></svg>
                                                        </button>
                                                      </td>
                                                    </tr>
                                                    </tbody>
                                                  </table>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </ng-container>
            <ng-container formGroupName="items2" *ngIf="loadPriceOffer">
              <ng-container>
                <ng-container>
                  <ng-container>
                    <div class="col-md-6 mb-3">
                      <div class="card">
                        <div class="card-header d-flex justify-content-between">
                          <h5>الاكسسوارات</h5>
                          <button [disabled]="myViewArray2.length == 0" class="btn btn-success" (click)="addAccessoriesItem()">
                            اضافة
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg"
                                 viewBox="0 0 16 16">
                              <path fill-rule="evenodd"
                                    d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z" />
                            </svg>
                          </button>
                        </div>
                        <div class="card-body">
                          <div class="row">
                            <div class="col-4">
                              <label style="visibility: hidden;">.</label>
                              <h5>الاكسسوارات</h5>
                            </div>
                            <div class="col-4">
                              <label style="visibility: hidden;">.</label>
                              <select aria-label="Default select example" formControlName="itemId"
                                      cSelect>
<!--                                <option selected value="">اختر الاضافات</option>-->
                                <option
                                  *ngFor="let load of loadPriceOffer['accessories']?.statuses?.statuses"
                                  [value]="load.statusId">{{load.description}}</option>
                              </select>
                            </div>

                            <div class="col-2">
                              <label>العدد</label>
                              <input aria-label="default input example" cFormControl
                                     formControlName="itemCount" type="number" (keyup)="getPrice2(); setPrice2($event)"/>
                            </div>
                            <div class="col-2">
                              <label>السعر</label>
                              <input style="{{items2Form.get('eachItemPrice')?.value > 0? 'opacity: 50%; pointer-events: none' : ''}}"
                                aria-label="default input example" cFormControl
                                     formControlName="itemPrice" type="number" />
                            </div>
                            <div class="col-md-12 mb-3">
                              <div class="row">
                                <div class="col-12">
                                  <label>الملاحظة</label>
                                  <textarea formControlName="notes" id="" cols="30"
                                            rows="3" class="form-control">
                                  </textarea>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-12">
                              <table class="w-100">
                                <table [striped]="true" cTable>
                                  <thead>
                                  <tr>
                                    <th scope="col">الوحدة</th>
                                    <th scope="col">العدد</th>
                                    <th scope="col">الملاحظات</th>
                                    <th scope="col">السعر</th>
                                    <th scope="col">حذف</th>
                                  </tr>
                                  </thead>
                                  <tbody>
                                  <tr *ngFor="let units of myViewArray2; index as i">
                                    <td>{{units.unit}}</td>
<!--                                    <td>{{units.unit2}}</td>-->
                                    <td>{{units.count}}</td>
                                    <td>{{units.note}}</td>
                                    <td>{{units.price}}</td>
                                    <td>
                                      <button (click)="deleteAccessories(i)" cButton class="btn btn-danger m-0 p-2">
                                        <svg cIcon name="cil-trash"></svg>
                                      </button>
                                    </td>
                                  </tr>
                                  </tbody>
                                </table>
                              </table>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </ng-container>
            </ng-container>
        </c-row>
    </form>

</c-card>
